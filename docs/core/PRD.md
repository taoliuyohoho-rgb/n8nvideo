# 产品需求文档（PRD）

## 1. 愿景与范围
- 愿景：构建内部跨境电商运营OS，聚焦“提效+提质”。
- 近期范围：优先落地视频制作（P0），并保持架构可拓展至 P1 商品管理、P2 数据监测，以及后续营销、订单、进货、客服等模块。

## 2. 用户与角色
- 角色：Admin（负责人/资深同事）、Operator（应届运营）、Supply（供应链）。
- 语言：中/英可切换（i18n）。
- 权限：先 Admin/Operator，两级起步，后续可扩展 RBAC。

## 3. 信息架构（两大入口）
- 工作台 Workbench
  - 视频制作向导（P0）
  - 任务中心（异步任务的进度/重试/回放/结果复用）
  - 最近资产（视频、Prompt、参考视频）
- 管理台 Admin
  - 商品库（主数据、店铺映射、批量导入/同步）
  - 任务管理（任务监控、预估模型监控/测试、推荐系统监控）
  - 数据分析（集成多个分析工具的统一入口）
    - 数据看板：广告表现数据分析，商品/国家/平台/店铺四维度下钻
    - 视频分析中心：视频上传分析、URL分析、竞品分析、参考视频管理
    - 商品映射管理：管理商品与广告平台的映射关系，支持AI推荐确认/拒绝
  - 人设管理（人设生成、编辑、关联商品）
  - 用户管理（用户CRUD、角色分配）
  - AI 配置（模型、兜底链路、配额）
  - Prompt 管理（按业务模块分组、版本/快照、批量操作）

导航规则：
- 顶部：入口切换（Workbench/Admin）+ 全局搜索 + 命令面板（Cmd/Ctrl+K）
- 左侧：模块化导航与面包屑；杜绝“孤岛URL”，所有功能从导航可达
- 右侧抽屉：查看/编辑详情，减少跨页
- 支持密度切换（紧凑/标准）

## 4. P0 视频制作（MVP）
目标：输入商品名 → 基于历史/商品库/竞品 → 产出可投放 Prompt（短期手动出视频）。

流程（双轨）：
- 标准模式（默认）：
  1) 召回 Top-N 风格（含理由）
  2) 用户确认风格
  3) 生成 Prompt
- 极速模式（可切换）：
  1) 一步直出 Prompt
  2) 若匹配置信度 < 阈值，自动回退到“风格确认”

风格库来源：
- AI 自动生成默认风格 → 管理员人工上传高质量视频 → AI 解析 → 人工挑选上架。

商品数据：
- 工作台“商品名一键填充”优先读取“商品库”字段（标题、卖点、图、规格、目标国家），不足再调用 AI 补全。

任务中心：
- 所有长流程动作（竞品解析、生成、批量操作）均进入任务中心，可重试、回放、复制结果。

验收标准（KPI）：
- 从新建到可用 Prompt ≤ 3 分钟
- 模板≤100条时匹配延迟 ≤ 2 秒
- 输出 Top-N 风格 + 理由
- 运营主观评价“可直接微调投放”≥ 80%
- 任务可追踪（traceId）、结果可复用

## 5. P1 商品管理
- 一键上品：跨平台/店铺复制，AI 填充商品信息。
- 一键打通：平台售价/营销信息拉齐。
- 分店铺管理：店铺人设/卖点差异化；支持多矩阵店铺与备用店铺。
- 商品聚合：店铺商品 → Admin 商品映射，形成数据主实体，供监测与推荐聚合。

## 6. P2 数据监测
- TikTok 优先，至少“日级自动采集”为硬要求；凭证到位后提供近实时（高频轮询/Webhook）。
- 指标：GMV、订单、广告 ROI、成本（库存/采购/人力/办公）。
- 下钻：平台/国家/店铺/商品维度；显示数据来源与更新时间。

## 7. 推荐引擎
- 召回/精排可插拔特征；输出 Top-N 与理由；记录决策日志（特征→打分→选择）。
- 权重调优：提供安全范围滑块与影子实验（只评估不生效）。
- 质量看板：质量分、反馈率、延迟、失败率；按场景/商品/风格下钻。

## 8. 非功能与合规
- 成本优先：P0 不直连视频生成 API；可调用第三方 AI，敏感信息脱敏；最小必要留存。
- 稳定性：未完成功能以 Feature Flag 隐藏或灰度。
- 可观测性：统一 traceId、结构化日志、关键指标。

## 9. 国际化与权限
- i18n：中/英切换，文案表统一管理。
- 权限：RBAC；起步 Admin/Operator，后续可配置更细角色与策略。

## 10. 里程碑
- M0（1-2 周）：P0 纵向切片（商品库预填→风格召回确认→Prompt 生成→任务中心）。
- M1（2-4 周）：P1 核心能力（上品/打通/分店铺管理、商品映射）。
- M2：P2 数据监测首版（日级自动采集），准备近实时接入。

## 11. 风险与对策
- 数据稀疏：采用“风格先确认+置信度回退”保障质量，并积累反馈。
- 凭证延迟：临时 CSV/Sheets 导入；凭证就绪立即切换自动采集。
- 回归破坏：接口契约与用例快照、关键服务契约测试、未完成功能隐藏。


